(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[927],{9876:function(e,t,a){Promise.resolve().then(a.bind(a,603))},603:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return N}});var r=a(9268),s=a(6006),i=e=>{let{text:t,onClick:a}=e;return(0,r.jsx)("button",{onClick:a,className:"bg-primary rounded-lg px-4 py-2 text-white w-fit cursor-pointer hover:shadow-sm hover:shadow-secondary",children:t})},n=a(4273),l=a(6394),d=a.n(l),o=(e,t)=>{var a=t.split(".");if(Array.isArray(a)){for(var s=a.length>1?a.pop():a,i=a.length,l=1,o=a[0];(e=e[o])&&l<i;)o=a[l],l++;return"object"==typeof e?e?e[s]:"":"image"===t?e&&(0,r.jsx)(d(),{src:"".concat(n._n,"/").concat(e),width:100,height:100,alt:""}):e}throw"parts is not valid array"},c=a(8136),h=e=>{let t=t=>(e.page-1)*e.limit+t+1;return(0,r.jsxs)("table",{className:"w-full border-collapse text-left",children:[(0,r.jsx)("thead",{className:"",children:(0,r.jsx)("tr",{children:e.headTable&&e.headTable.map((e,t)=>(0,r.jsx)("th",{scope:"col",className:"px-6 py-4",children:e},t))})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-100 border-t border-gray-100 ",children:e.dataTable&&e.dataTable.map((a,s)=>{let{id:i}=a;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50 hover:text-body",children:[(0,r.jsx)("td",{className:"px-6 py-4 rounded-l-xl",children:t(s)}),e.tableBodies.map((e,t)=>(0,r.jsx)("td",{className:"px-6 py-4 }",children:o(a,e)},t)),(0,r.jsx)("td",{className:"px-6 py-4 rounded-r-xl",children:(0,r.jsxs)("div",{className:"flex flex-row gap-2",children:[e.ubah&&(0,r.jsx)(c.Ph1,{onClick:()=>e.setEdit(a),size:20,className:"cursor-pointer hover:text-yellow-500"}),e.hapus&&(0,r.jsx)(c.AuQ,{onClick:()=>e.setDelete(i),size:20,className:"cursor-pointer hover:text-red-700"})]})})]},s)})})]})},m=a(2561),u=a(4475),p=a(1712);let x=(0,m.Ue)((0,u.mW)((e,t)=>({setToken:()=>{let e=p.Z.get("token");return e},dtProject:[],setProject:async a=>{let{page:r=1,limit:s=10,search:i}=a;try{let a=await (0,n.Sj)({method:"get",url:"/project",headers:{Authorization:"Bearer ".concat(t().setToken())},params:{limit:s,page:r,search:i}});return e(e=>({...e,dtProject:a.data.data})),{status:"berhasil",data:a.data}}catch(e){return{status:"error",error:e.response.data}}},addData:async a=>{let r=new FormData;r.append("name",a.name),r.append("link_github",a.link_github),r.append("link_website",a.link_website),r.append("description",a.description),r.append("image",null==a?void 0:a.image[0].file),a.image||(r=a);try{let a=await (0,n.Sj)({method:"post",url:"/project",headers:{Authorization:"Bearer ".concat(t().setToken()),"Content-Type":"multipart/form-data"},data:r});return e(e=>({dtProject:{last_page:e.dtProject.last_page,current_page:e.dtProject.current_page,data:[a.data.data,...e.dtProject.data]}})),{status:"berhasil tambah",data:a.data}}catch(e){return{status:"error",data:e.response.data}}},removeData:async a=>{try{let r=await (0,n.Sj)({method:"delete",url:"/project/".concat(a),headers:{Authorization:"Bearer ".concat(t().setToken())}});return e(e=>({dtProject:{last_page:e.dtProject.last_page,current_page:e.dtProject.current_page,data:e.dtProject.data.filter(e=>e.id!==a)}})),{status:"berhasil hapus",data:r.data}}catch(e){return{status:"error",data:e.response.data}}},updateData:async(a,r)=>{let s=new FormData;s.append("name",r.name),s.append("link_github",r.link_github),s.append("link_website",r.link_website),s.append("description",r.description),s.append("image",null==r?void 0:r.image[0].file),r.image||(s=r);try{let r=await (0,n.Sj)({method:"post",url:"/project/".concat(a),headers:{Authorization:"Bearer ".concat(t().setToken())},data:s,params:{_method:"PUT"}});return e(e=>({dtProject:{last_page:e.dtProject.last_page,current_page:e.dtProject.current_page,data:e.dtProject.data.map(e=>e.id===a?{...e,...r.data.data}:e)}})),{status:"berhasil update",data:r.data}}catch(e){return{status:"error",data:e.response.data}}}})));var b=a(7734),j=a.n(b),g=e=>{let{label:t,register:a,required:s,errors:i,addClass:n,name:l,images:o,setImages:c}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{type:"text",id:t,...a(l,{required:s}),value:(null==o?void 0:o.length)||""}),(0,r.jsx)(j(),{multiple:!0,value:o,onChange:(e,t)=>{console.log({imageList:e},{addUpdateIndex:t}),c(e)},maxNumber:69,dataURLKey:"data_url",children:e=>{let{imageList:t,onImageUpload:a,onImageRemoveAll:s,onImageUpdate:i,onImageRemove:n,isDragging:l,dragProps:o}=e;return(0,r.jsxs)("div",{className:"upload__image-wrapper cursor-pointer",children:[(0,r.jsx)("div",{style:l?{color:"red"}:void 0,onClick:a,...o,children:"Click or Drop here"}),"\xa0",(0,r.jsx)("div",{onClick:s,children:"Remove all images"}),t.map((e,t)=>(0,r.jsxs)("div",{className:"image-item",children:[(0,r.jsx)(d(),{src:e.data_url,width:100,height:100,alt:""}),(0,r.jsxs)("div",{className:"image-item__btn-wrapper",children:[(0,r.jsx)("div",{onClick:()=>i(t),children:"Update"}),(0,r.jsx)("div",{onClick:()=>n(t),children:"Remove"})]})]},t))]})}})]})},k=e=>{let{label:t,register:a,required:s,name:i,minLength:n,maxLength:l,errors:d,valueAsNumber:o,type:c="text",readOnly:h,placeholder:m,autoComplete:u="on",addClass:p}=e;return(0,r.jsxs)("div",{className:p,children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-400 tracking-wide",children:t}),s&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("input",{className:"w-full text-base px-4 py-2 border  border-gray-300 rounded-lg focus:outline-none focus:border-secondary bg-black",type:c,id:t,readOnly:h,placeholder:m,autoComplete:u,...a(i,{required:s,minLength:n,maxLength:l,valueAsNumber:o})})}),(null==d?void 0:d.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kosong"]}),(null==d?void 0:d.type)==="minLength"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kurang dari ",n," karakter"]}),(null==d?void 0:d.type)==="maxLength"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh lebih dari ",l," karakter"]}),(null==d?void 0:d.type)==="pattern"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," hanya boleh angka."]})]})},f=e=>{let{showModal:t,setShowModal:a,children:s,title:i}=e;return(0,r.jsx)("div",{className:"",children:t&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 mx-auto flex justify-center bg-black/[0.2]",children:(0,r.jsxs)("div",{className:"bg-black p-5 rounded-xl w-[500px] h-min mt-[10%] max-h-[70%] overflow-auto lg:ml-64",children:[(0,r.jsxs)("div",{className:"flex flex-row items-center justify-between border-b border-primary/[0.2] mb-4 pb-2",children:[(0,r.jsx)("h5",{className:"text-xl font-roboto",children:i}),(0,r.jsx)(c.C7Q,{className:"cursor-pointer hover:text-primary",onClick:()=>a(!1)})]}),s]})})})},v=a(9700),w=e=>{let{dtEdit:t,showModal:a,setShowModal:n}=e,[l,d]=(0,s.useState)(),{addData:o}=x(),{register:c,handleSubmit:h,reset:m,setValue:u,formState:{errors:p}}=(0,v.cI)(),b=async e=>{e.image=l,console.log({data:e}),await o(e),j()},j=()=>{u("id",""),u("name",""),u("link_github",""),u("link_website",""),u("description",""),u("image","")};return(0,s.useEffect)(()=>{t?(u("id",t.id),u("name",t.name),u("link_github",t.link_github),u("link_website",t.link_website),u("description",t.description),u("image",t.image)):j()},[a]),(0,r.jsx)(f,{title:"Form Mata Kuliah",showModal:a,setShowModal:n,children:(0,r.jsxs)("form",{onSubmit:h(b),children:[(0,r.jsx)(k,{name:"id",register:c,type:"hidden"}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 mb-4",children:[(0,r.jsx)("div",{className:"flex gap-4",children:(0,r.jsx)(k,{label:"Nama",name:"name",register:c,required:!0,minLength:3,errors:p.name,addClass:"shrink w-[100%]"})}),(0,r.jsx)("div",{className:"flex gap-4",children:(0,r.jsx)(k,{label:"Link Github",name:"link_github",register:c,minLength:3,addClass:"shrink w-[100%]"})}),(0,r.jsx)("div",{className:"flex gap-4",children:(0,r.jsx)(k,{label:"Link Website",name:"link_website",register:c,minLength:3,required:!0,errors:p.link_website,addClass:"shrink w-[100%]"})}),(0,r.jsx)("div",{className:"flex gap-4",children:(0,r.jsx)(k,{label:"Description",name:"description",register:c,minLength:3,addClass:"shrink w-[100%]"})}),(0,r.jsx)(g,{label:"Description",name:"image",register:c,images:l,setImages:d,required:!0})]}),(0,r.jsx)("div",{children:(0,r.jsx)(i,{text:"Simpan",onClick:h(b)})})]})})},y=e=>{let{setIsDelete:t,showDel:a,setShowDel:s}=e;return a&&(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"fixed inset-0 z-50 mx-auto flex justify-center bg-black/[0.2]",children:(0,r.jsxs)("div",{className:"bg-white p-5 rounded-xl lg:ml-64 md:min-w-[500px] h-min mt-[20%] max-h-[70%] overflow-auto",children:[(0,r.jsxs)("div",{className:"flex flex-row items-center justify-between border-b border-primary/[0.1] mb-4 pb-2",children:[(0,r.jsx)("h5",{className:"text-xl font-roboto",children:"Hapus Data"}),(0,r.jsx)(c.C7Q,{className:"cursor-pointer hover:text-black/[0.5]",onClick:()=>s(!1)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:"Apaka Anda Yakin Menghapus Data Ini?"}),(0,r.jsxs)("div",{className:"flex justify-center gap-4 mt-4",children:[(0,r.jsx)("button",{className:"hover:border hover:border-red-600 bg-red-600 w-20 py-2 rounded-xl text-white ",onClick:()=>t(!0),children:"Hapus"}),(0,r.jsx)("button",{className:"w-20 py-2 rounded-xl hover:border-b",onClick:()=>s(!1),children:"Batal"})]})]})]})})})},N=()=>{let{setProject:e,dtProject:t,removeData:a}=x(),[n,l]=(0,s.useState)(1),[d,o]=(0,s.useState)(10),[c,m]=(0,s.useState)(!1),[u,p]=(0,s.useState)(!1),[b,j]=(0,s.useState)(),[g,k]=(0,s.useState)(!1),[f,v]=(0,s.useState)(!1),N=async()=>{await e({page:n,limit:d,search:""})};return(0,s.useEffect)(()=>(N(),()=>{}),[n,d]),console.log({dtProject:t}),(0,s.useEffect)(()=>(f&&(a(b),v(!1),k(!1)),()=>{v(!1)}),[b,f,a]),(0,r.jsxs)("div",{children:[(0,r.jsx)(w,{dtEdit:u,showModal:c,setShowModal:m}),(0,r.jsx)(y,{showDel:g,setShowDel:k,setIsDelete:v}),(0,r.jsx)("div",{className:"m-4 flex justify-end",children:(0,r.jsx)(i,{text:"Tambah Project",onClick:()=>{m(!0),p(!1)}})}),(0,r.jsx)("div",{className:"overflow-auto",children:(0,r.jsx)(h,{headTable:["No","Nama","Gambar","Github","Website","Keterangan","Aksi"],tableBodies:["name","image","link_github","link_website","description"],dataTable:t.data,page:n,limit:d,setEdit:e=>{m(!0),p(e)},setDelete:e=>{j(e),k(!0)},ubah:!0,hapus:!0})})]})}},4273:function(e,t,a){"use strict";a.d(t,{I8:function(){return i},Sj:function(){return n},_n:function(){return s},hi:function(){return l}});var r=a(4214);let s="https://back.smart.artgar.my.id",i=r.Z.create({baseURL:"".concat(s,"/auth")}),n=r.Z.create({baseURL:"".concat(s,"/crud")}),l=r.Z.create({baseURL:"".concat(s,"/api")});r.Z.create({baseURL:"".concat(s,"/storage")})}},function(e){e.O(0,[141,348,964,92,442,667,488,744],function(){return e(e.s=9876)}),_N_E=e.O()}]);